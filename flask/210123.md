# Web Application with Flask

## Ⅰ. Introduction

> - 웹 애플리케이션 제작에 필요한 Flask 지식
> - Rendering, Blueprint, Authentication and Logging 등

## Ⅱ. Rendering Template

flask 내에서 html 파일을 이용해 웹 사이트를 제작한다. 이 때 render_template()를 이용해 라우팅하여 브라우저에서 보여줄 수 있다.

```python
from flask import Flask, render_template, request, redirect, url_for
app = Flask(__name__)

board = []
@app.route('/')
def index():
    return render_template('Board.html', rows = board)

@app.route('/add', methods = ['POST'])
def add():
    if request.method == 'POST':
        name = request.form['name']
        context = request.form['context']
        board.append([name, context])
        return redirect(url_for('index'))
    else:
        return render_template('Board.html', rows = board)


if __name__ == '__main__':
    app.run(debug=True)
```

```html
<table class="table">
  <thread>
    <th width="4%">목차</th>
    <th width="15%">이름</th>
    <th width="25%">내용</th>
  </thread>
  <!-- jinja2 를 이용해 html 내에서 python 구현 -->
  {% for row in rows %}
  <tr>
    <td>{{ loop.index }}</td>
    <td>{{ row[0] }}</td>
    <td>{{ row[1] }}</td>
  </tr>
  {% endfor %}
</table>
```

## Ⅲ. 블루 프린트

애플리케이션에 등록할 때 실행할 작업을 기록해두는 청사진이다. flask의 요청으로 URL을 생성할 때 화면을 출력하는 함수를 블루 프린트와 연결한다. 웹 애플리케이션의 개체를 사전에 요구하지 않고 기능을 정의할 수 있다. 무엇보다 모듈을 여러개로 나누어 유지 보수 측면에서 효과적인 개발이 가능하다. 다른 메인 모듈에서 import하여 등록하여 이용 가능하다

```python
# 블루프린트 simple_pages.py
from flask import Blueprint, render_template, abort
from jinja2 import TemplateNotFound

simple_page = Blueprint('simple_page', __name__,
                        template_folder='templates')

@simple_page.route('/', defaults={'page': 'index'})
@simple_page.route('/<page>')
def show(page):
    try:
        return render_template('pages/%s.html' % page)
    except TemplateNotFound:
        abort(404)
```

```python
from flask import Flask, render_template, request, redirect, url_for
from simple_pages import simple_page

app = Flask(__name__)
app.register_blueprint(simple_page, url_prefix='/simple_page')

board = []
@app.route('/')
def index():
    return render_template('Board.html', rows = board)

@app.route('/add', methods = ['POST'])
def add():
    if request.method == 'POST':
        name = request.form['name']
        context = request.form['context']
        board.append([name, context])
        return redirect(url_for('index'))
    else:
        return render_template('Board.html', rows = board)


if __name__ == '__main__':
    app.run(debug=True)
```
